package org.trustify.operator.services;

import io.fabric8.kubernetes.api.model.Secret;
import org.trustify.operator.Constants;
import org.trustify.operator.TrustifyConfig;
import org.trustify.operator.cdrs.v2alpha1.Trustify;

import java.util.Optional;

public interface Cluster {
    Optional<String> getClusterHostname();
    Optional<String> getClusterHost(Trustify cr);
    Optional<String> getAutoGeneratedIngressHost(Trustify cr);
    Optional<Secret> getAutoGeneratedKeycloakTlsSecret(Trustify cr);
    Optional<Secret> getAutoGeneratedServerTlsSecret(Trustify cr);

    TrustifyConfig.KeycloakSubscriptionConfig getKeycloakSubscriptionConfig();

    static String getKeycloakSelfGeneratedTlsSecretName(Trustify cr) {
        return cr.getMetadata().getName() + "-" + Constants.TRUSTI_NAME + "-keycloak-tls";
    }

    static String getServerSelfGeneratedTlsSecretName(Trustify cr) {
        return cr.getMetadata().getName() + "-" + Constants.TRUSTI_SERVER_NAME + "-tls";
    }
}
